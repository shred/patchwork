#
# PatchWork
#
# Copyright (C) 2010 Richard "Shred" Körber
#   http://patchwork.shredzone.org
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#

SRCP	  = src
INCP      = include
OBJP      = bin

OBJS      = $(OBJP)/Main.o $(OBJP)/Hit.o $(OBJP)/Timer.o $(OBJP)/Exec.o \
            $(OBJP)/Dos.o $(OBJP)/Graphics.o $(OBJP)/Intuition.o \
            $(OBJP)/Utility.o $(OBJP)/Commodities.o

LIBS      = lib:debug.lib lib:amiga.lib

AOPTS     = ERRORS=0 OPT=NRQLPS NOEXE INCPATH=Include:,$(INCP)
LOPTS     = NODEBUG SMALLCODE SMALLDATA

.PHONY : all install clean

all: $(OBJP) $(OBJP)/PatchWork

install: all
    copy FROM $(OBJP)/PatchWork TO C:

clean:
    delete ALL QUIET $(OBJP)

$(OBJP):
    makedir $(OBJP)

$(OBJP)/PatchWork: $(OBJS)
    phxlnk $(LOPTS) TO $(OBJP)/PatchWork FROM $(OBJS) $(LIBS)

$(OBJP)/Main.o: $(SRCP)/Main.s $(SRCP)/PatchWork.i $(SRCP)/PatchWork_rev.i
    phxass $(AOPTS) FROM $(SRCP)/Main.s TO $(OBJP)/Main.o

$(OBJP)/Hit.o: $(SRCP)/Hit.s $(SRCP)/PatchWork.i
    phxass $(AOPTS) FROM $(SRCP)/Hit.s TO $(OBJP)/Hit.o

$(OBJP)/Timer.o: $(SRCP)/Timer.s $(SRCP)/PatchWork.i
    phxass $(AOPTS) FROM $(SRCP)/Timer.s TO $(OBJP)/Timer.o

$(OBJP)/Exec.o: $(SRCP)/Exec.s $(SRCP)/PatchWork.i
    phxass $(AOPTS) FROM $(SRCP)/Exec.s TO $(OBJP)/Exec.o

$(OBJP)/Dos.o: $(SRCP)/Dos.s $(SRCP)/PatchWork.i
    phxass $(AOPTS) FROM $(SRCP)/Dos.s TO $(OBJP)/Dos.o

$(OBJP)/Graphics.o: $(SRCP)/Graphics.s $(SRCP)/PatchWork.i
    phxass $(AOPTS) FROM $(SRCP)/Graphics.s TO $(OBJP)/Graphics.o

$(OBJP)/Intuition.o: $(SRCP)/Intuition.s $(SRCP)/PatchWork.i
    phxass $(AOPTS) FROM $(SRCP)/Intuition.s TO $(OBJP)/Intuition.o

$(OBJP)/Utility.o: $(SRCP)/Utility.s $(SRCP)/PatchWork.i
    phxass $(AOPTS) FROM $(SRCP)/Utility.s TO $(OBJP)/Utility.o

$(OBJP)/Commodities.o: $(SRCP)/Commodities.s $(SRCP)/PatchWork.i
    phxass $(AOPTS) FROM $(SRCP)/Commodities.s TO $(OBJP)/Commodities.o

#
